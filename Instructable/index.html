<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:宋体;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"Calibri Light";
	panose-1:2 15 3 2 2 2 4 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:新宋体;
	panose-1:2 1 6 9 3 1 1 1 1 1;}
@font-face
	{font-family:"\@宋体";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"\@新宋体";
	panose-1:2 1 6 9 3 1 1 1 1 1;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:0cm;
	line-height:107%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:107%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Calibri Light","sans-serif";
	color:#2E74B5;
	font-weight:normal;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:2.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:107%;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:"Calibri Light","sans-serif";
	color:#2E74B5;
	font-weight:normal;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:2.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:107%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Calibri Light","sans-serif";
	color:#1F4D78;
	font-weight:normal;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Title Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:28.0pt;
	font-family:"Calibri Light","sans-serif";
	letter-spacing:-.5pt;}
p.MsoTitleCxSpFirst, li.MsoTitleCxSpFirst, div.MsoTitleCxSpFirst
	{mso-style-link:"Title Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:28.0pt;
	font-family:"Calibri Light","sans-serif";
	letter-spacing:-.5pt;}
p.MsoTitleCxSpMiddle, li.MsoTitleCxSpMiddle, div.MsoTitleCxSpMiddle
	{mso-style-link:"Title Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:28.0pt;
	font-family:"Calibri Light","sans-serif";
	letter-spacing:-.5pt;}
p.MsoTitleCxSpLast, li.MsoTitleCxSpLast, div.MsoTitleCxSpLast
	{mso-style-link:"Title Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:28.0pt;
	font-family:"Calibri Light","sans-serif";
	letter-spacing:-.5pt;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:#954F72;
	text-decoration:underline;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:36.0pt;
	line-height:107%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	line-height:107%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	line-height:107%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:36.0pt;
	line-height:107%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoQuote, li.MsoQuote, div.MsoQuote
	{mso-style-link:"Quote Char";
	margin-top:10.0pt;
	margin-right:43.2pt;
	margin-bottom:8.0pt;
	margin-left:43.2pt;
	text-align:center;
	line-height:107%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	color:#404040;
	font-style:italic;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Calibri Light","sans-serif";
	color:#2E74B5;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Calibri Light","sans-serif";
	color:#2E74B5;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Calibri Light","sans-serif";
	color:#1F4D78;}
span.QuoteChar
	{mso-style-name:"Quote Char";
	mso-style-link:Quote;
	color:#404040;
	font-style:italic;}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-link:Title;
	font-family:"Calibri Light","sans-serif";
	letter-spacing:-.5pt;}
.MsoChpDefault
	{font-family:"Calibri","sans-serif";}
.MsoPapDefault
	{margin-bottom:8.0pt;
	line-height:107%;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=EN-US link=blue vlink="#954F72">

<div class=WordSection1>

<p class=MsoTitle>Artificial Neural Network meets ATTINY</p>

<p class=MsoNormal align=center style='text-align:center'><img width=574 height=431 src="images/IMG_1082.png"></p>

<h1>Introduction</h1>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Gentlemen,</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Welcome
to my first instructable. It is a long time I follow this excellent site. I
learn a lot from this community and I wish to return back the favor by
publishing my own contribution.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>I do
apologize for the English as it is not my native language. Remarks are highly
appreciated.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Since
I discovered Intructables.com, I began to play with Arduino and robotic. From
my educational background, I have some knowledge about Artificial Intelligence.
So I thought it would be nice to put them together. Little by little, the idea
to build a robot, based on some ATTINY processor and programmed using an
Artificial Neural Network (ANN), began to blossom in my mind. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>When
people talks about Artificial Neural Network, one will usually think about some
complex technologies which can learn by itself. True, ANN has this property to be
trained but at the cost of computation power ATTINY doesn’t have. Yet a Fixed ANN
(pre-trained) can be implemented on such tiny processors. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>So
here we are. I settled for an “Avoiding Collision Type” robot powered by a
Fixed ANN. Later on, I planned to add a self-learning module using a Raspberry-Pi
to train the ANN implemented here (Perhaps a next instructable?).</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>I
want also try new skills like homemade double-sided PCB, improving conception
and building techniques. I want also have a robot easy to program and easy to
debug.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>This
instructable will be divided into 2 parts; 1) the building and the programming
of the robot and 2) the theory of the Neuronal network and its implementation
here. Everybody can build this little robot without the second part.</p>

<h1>Step1: Requirements</h1>

<p class=MsoNormal align=center style='text-align:center'><img width=574 height=431 src="images/IMG_1052.jpg"></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Download
the zip package containing all documents, sketches and libraries. </p>

<h2>Software:</h2>

<p class=MsoListParagraphCxSpFirst style='text-align:justify;text-justify:inter-ideograph;
text-indent:-18.0pt'><span style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>OpenSCAD</p>

<p class=MsoListParagraphCxSpMiddle style='text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Fritzing</p>

<p class=MsoListParagraphCxSpMiddle style='text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Arduino IDE</p>

<p class=MsoListParagraphCxSpLast style='text-align:justify;text-justify:inter-ideograph;
text-indent:-18.0pt'><span style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Inkskape (Optional)</p>

<h2>Material for the robot:</h2>

<p class=MsoListParagraphCxSpFirst style='text-indent:-18.0pt'><span
style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x2) Acrylic sheets</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>&nbsp;(x2) wheel</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x1) Caster roller</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x4) M3 spacer 18mm</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x4) M3 spacer 10mm</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x2) M3 spacer 4mm</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x3) L shaped support in metal or plastic</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>M3 screws and nuts</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x2) Motor N20 and support</p>

<p class=MsoListParagraphCxSpLast style='text-align:justify;text-justify:inter-ideograph;
text-indent:-18.0pt'><span style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x1) BATTERY LIPO 7.2V</p>

<h2>Electronics:</h2>

<h3>Motherboard:</h3>

<p class=MsoListParagraphCxSpFirst style='text-align:justify;text-justify:inter-ideograph;
text-indent:-18.0pt'><span style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x1) ATTINY84A</p>

<p class=MsoListParagraphCxSpMiddle style='text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x1) H-Bridge L293D</p>

<p class=MsoListParagraphCxSpMiddle style='text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x1) Regulator 7805</p>

<p class=MsoListParagraphCxSpMiddle style='text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x1) Capacitor 100uF (16V)</p>

<p class=MsoListParagraphCxSpMiddle style='text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x1) Capacitor 1uf (16V)</p>

<p class=MsoListParagraphCxSpMiddle style='text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x1) Capacitor 100nf</p>

<p class=MsoListParagraphCxSpMiddle style='text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x1) Resistor 220O</p>

<p class=MsoListParagraphCxSpMiddle style='text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x1) Resistor 10KO</p>

<p class=MsoListParagraphCxSpMiddle style='text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x1) LED (I like blue <span style='font-family:Wingdings'>J</span>)</p>

<p class=MsoListParagraphCxSpMiddle style='text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x1) Micro switch (ON/OFF)</p>

<p class=MsoListParagraphCxSpMiddle style='text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x1) Micro Push Switch (RESET)</p>

<p class=MsoListParagraphCxSpMiddle style='text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Wires</p>

<p class=MsoListParagraphCxSpLast style='text-align:justify;text-justify:inter-ideograph;
text-indent:-18.0pt'><span style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Several connectors</p>

<h3>Sensor (x3):</h3>

<p class=MsoListParagraphCxSpFirst style='text-align:justify;text-justify:inter-ideograph;
text-indent:-18.0pt'><span style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x1) Resistor 100KO</p>

<p class=MsoListParagraphCxSpMiddle style='text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x1) Resistor 220O</p>

<p class=MsoListParagraphCxSpMiddle style='text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x1) IR Emitter/Receiver</p>

<p class=MsoListParagraphCxSpLast style='text-align:justify;text-justify:inter-ideograph;
text-indent:-18.0pt'><span style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>(x1) Servo type connector</p>

<h2>Tools</h2>

<p class=MsoListParagraphCxSpFirst style='text-indent:-18.0pt'><span
style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Hot glue gun</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Solder station</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Screw drivers</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Cutters</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Pliers</p>

<h2>Disclaimer and Safety:</h2>

<p class=MsoNormal style='margin-left:18.0pt'>&nbsp;</p>

<h1>Step1: Building the motherboard</h1>

<p class=MsoNormal align=center style='text-align:center'><img width=576
height=404 id="Picture 4" src="images/motherboard_pcb_5v_diag.png"></p>

<p class=MsoNormal align=center style='text-align:center'><img width=575
height=251 id="Picture 5" src="images/motherboard_pcb_5v_schem.png"></p>

<p class=MsoNormal align=center style='text-align:center'><img width=575
height=425 id="Picture 6" src="images/motherboard_pcb_5v_pcb.png"></p>

<p class=MsoNormal align=center style='text-align:center'><img width=574
height=431 id="Picture 7" src="images/IMG_1061.jpg"></p>

<p class=MsoNormal align=center style='text-align:center'><img width=574
height=431 id="Picture 8" src="images/IMG_1058.jpg"></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
motherboard features a power regulator (5V) to power an ATTINY84A chip. This
chip has a reset button and a programmer connector (J1) using the SPI protocol
(SLT, MOSI, MISO, CLK). 3 pins (J2, J3, J4) are used as analog input, 2 pins
(J5, J6) as digital inputs/outputs and the other pins are connected to a L293D
to command two N20 motors. I invite you to search on Instructables.com about
ATTINY. There are many instructable about how to use and to program them.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>In the
ZIP package, the Fritzing file contains the two layers of the PCB. The top
layer contains only few connections with via. They can be replaced by some
wires for who prefer to make a “one layer” PCB. I used the toner transfer
method (again all instructables are your friend). To align the 2 layers, I
drilled 2 via on each side of the PCB. With the help of 2 pins I sandwiched the
PCB with glossy papers (one for the top layer (mirror), one for the bottom
layer) and feed to a press machine. After etching, the result was very
acceptable.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><b>IMPORTANT:
Triple check all the copper tracks and with a multi-meter checks for short
circuits or discontinued track.</b></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>After
soldering the via, I protected the top layer copper using a transparent
protective spray. After soldering the components, I used the same spray to
protect the bottom layer copper. I also used hot glue at the base of the wires
to reinforce their mechanical strengths.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Use the
third picture as reference to place the components. I put connectors for the
motors (M1, M2), the sensors (J2, J3, J4), and the programmer (J1). They are 2
free connectors (J5, J6) that can be used for a daughter board or for
debugging. These connectors were what I found in my workshop. Feel free to use
whatever you have or solder the wires directly. The connector J2 to J6 use the
same pin arrangements; the pin close to the ATTINY is the signal (SIG), the pin
in the middle is 5V and the pin outside is the ground (GND). I soldered wires
with a JST connector for the battery. Depending of your battery you may have to
choose another connector.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>In
the ZIP package, I put some sketches to debug the motherboard and ensure the
sensors and the motors are working. You will find more details how to use them
in the later steps. I advise you to first try these sketches before to upload
the neuronal network sketch. If the motors run in the wrong direction, just
swap their wires (or change the digital pins in the sketches).</p>

<h1>Step2: Building the sensors</h1>

<p class=MsoNormal align=center style='text-align:center'><img width=378
height=221 id="Picture 9" src="images/sensor_pcb_schem.png"></p>

<p class=MsoNormal align=center style='text-align:center'><img width=189
height=348 id="Picture 10" src="images/sensor_pcb_pcb.png"></p>

<p class=MsoNormal align=center style='text-align:center'><img width=574
height=431 id="Picture 11" src="images/IMG_1059.jpg"></p>

<p class=MsoNormal align=center style='text-align:center'><img width=574
height=431 id="Picture 13" src="images/IMG_1062.jpg"></p>

<p class=MsoNormal>You must build 3 of this sensor. The robot will use Infrared
sensor to detect obstacles. Basically closer is the obstacles, lower is the
voltage at the pins of the IR receiver. The voltage is at its highest when
there is no obstacle. These sensors will be connected to 3 analog pins (A0, A1,
A2) of the ATTINY.</p>

<p class=MsoNormal>This sensor is a single layer PCB and uses the same build
process as the motherboard.</p>

<h1>Step3: Building the robot</h1>

<p class=MsoNormal align=center style='text-align:center'><img width=575
height=365 id="Picture 14" src="images/step1.png"></p>

<p class=MsoNormal align=center style='text-align:center'><img width=575
height=365 id="Picture 15" src="images/step2.png"></p>

<p class=MsoNormal align=center style='text-align:center'><img width=575
height=365 id="Picture 16" src="images/step3.png"></p>

<p class=MsoNormal align=center style='text-align:center'><img width=575
height=365 id="Picture 17" src="images/step4.png"></p>

<p class=MsoNormal align=center style='text-align:center'><img width=575
height=365 id="Picture 18" src="images/step5.png"></p>

<p class=MsoNormal align=center style='text-align:center'><img width=574
height=431 id="Picture 20" src="images/IMG_1067.jpg"></p>

<p class=MsoNormal align=center style='text-align:center'><img width=574
height=431 id="Picture 19" src="images/IMG_1063.jpg"></p>

<p class=MsoNormal align=center style='text-align:center'><img width=574
height=431 id="Picture 21" src="images/IMG_1066.jpg"></p>

<p class=MsoNormal align=center style='text-align:center'><img width=574
height=431 id="Picture 22" src="images/IMG_1073.jpg"></p>

<p class=MsoNormal>The base of the robot is built with acrylic sheets. I had
these round plates in my workshop from a turtle robot kit. You can use the
openSCAD files (in the ZIP package) to export the dimensions and use a laser
cutter. Or you can buy a kit for a very low price.</p>

<p class=MsoNormal>After screwing the motors and the caster roller on the back
on one plate, zip tie the battery on the top.</p>

<p class=MsoNormal>Screw the sensors and the motherboard on the top of the
other plate. The sensors are attached to the plate using small L shaped
support. I found those in my junk box.</p>

<p class=MsoNormal>Finally screw the 2 plates together. Pass the different
wires through the hole in the middle of the plates below the motherboard.
Attach the connectors and admire your work <span style='font-family:Wingdings'>J</span>.</p>

<h1>Step4: Programming: Connect the programmer</h1>

<p class=MsoNormal align=center style='text-align:center'><img width=574
height=431 id="Picture 23" src="images/IMG_1071.jpg"></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
robot will be programmed using Arduino IDE. The ATTINY needs a programmer (USB-ASP)
connected to your computer by a USB port and using the 10pins connector.
Usually the programmer is plug-and-play and it is recognized by the Arduino
IDE. The programmer port will appear in the option Port of the Tools menu. If
not, please refer to the documentation of your programmer.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Before
to upload sketches, please burn the autoloader by selecting the command in the Tools
menu. When the autoloader is successfully burnt, you are ready to program your
robot by compiling/uploading a sketch in one click.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>In
the picture, you can see I use the free pins (J5, J6) to connect a serial USB
interface (TX, RX, GND). By using the SoftwareSerial library, I can use the
monitor and the plotter for debugging. This is optional but I strongly advise
to setup this interface if you want check the different components works or if
you want play with the code.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><b>IMPORTANT:
Do not power on the robot when uploading a sketch. If you power on, the motor
may start randomly and you may damage the power regulator.</b></p>

<h1>Step5: Programming: Upload the test sketches</h1>

<p class=MsoNormal>Before to upload the ANN sketch, please try the test
sketches:</p>

<p class=MsoListParagraphCxSpFirst style='text-align:justify;text-justify:inter-ideograph;
text-indent:-18.0pt'><span style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Frontsensorneuron: using the serial interface, you can visualize,
using the plotter of Arduino IDE, the effect of the sensor when you put on
obstacle (your hands) in front of the sensor.</p>

<p class=MsoListParagraphCxSpMiddle style='text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Sidesensorneuron: using the serial interface, you can visualize,
using the plotter of Arduino IDE, the effect of the sensors when you put on
obstacle (your hands) in front of the sensors. This one visualize the difference
between right and left sensors. If your hand is closer to the left or right
sensor, the curve will move accordingly.</p>

<p class=MsoListParagraphCxSpLast style='text-align:justify;text-justify:inter-ideograph;
text-indent:-18.0pt'><span style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Motorneuron; it will turn the motor forward, backward, turn right
and turn left. If the robot moves in other direction try to swap the wires or
the connectors.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>After
connected the serial interface and the programmer, upload one sketch. Then turn
on the robot. You should see numbers on monitor or a curve on the plotter.
Please be sure to select the same speed as the sketches (9600bauds).</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>If
all the debug sketches upload and work properly, you won’t have any trouble for
the following step.</p>

<h1>Step6: Calibration</h1>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'>The robot ANN needs a calibration before to be
used. Open the “brain.ino” sketch. In the “config.h”, uncomment the “<span
style='font-size:9.5pt;font-family:新宋体;color:green'>#define CALLIBRATE</span>“.
Be sure to power off the robot before to upload. Please watch the video and the
pictures to perform the calibration.</p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'>&nbsp;</p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-justify:inter-ideograph;line-height:normal;text-autospace:none'>Before
the calibration, be sure to have no obstacles around the robot when you power
on. When the first calibration is over, the robot will move forward a bit. Then
it will calibrate the front sensor. The robot will move forward until it meet
an obstacle. Here it will move forward and backward judging the distance. After
it will calibrate the side sensors. It will turn right and adjust the balance
between the sensor by turning left and right.</p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'>&nbsp;</p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'>As you can see in the video and pictures, I use a rig
of carton to build an enclosure to perform the calibration.</p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'>&nbsp;</p>

<h1>Step7: Here you go!</h1>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>When
the calibration is over, power off the robot. Comment the “<span
style='font-size:9.5pt;line-height:107%;font-family:新宋体;color:green'>#define
CALLIBRATE</span>“ in the “config.h” and upload the sketch again. Now the robot
should move forward and avoid obstacles by its own.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Please
have a look at the video to see the robot in action.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Congratulation
if you have followed me so far. Let start for the theory.</p>

<h1>Step9: A bit of theory</h1>

<p class=MsoNormal>From Wikipedia, an Artificial Neuronal Network (ANN) is:</p>

<p class=MsoQuote><span lang=EN>“In </span><a
href="https://en.wikipedia.org/wiki/Machine_learning" title="Machine learning"><span
lang=EN>machine learning</span></a><span lang=EN> and </span><a
href="https://en.wikipedia.org/wiki/Cognitive_science" title="Cognitive science"><span
lang=EN>cognitive science</span></a><span lang=EN>, <b>artificial neural
networks</b> (<b>ANNs</b>) are a family of models inspired by </span><a
href="https://en.wikipedia.org/wiki/Biological_neural_network"
title="Biological neural network"><span lang=EN>biological neural networks</span></a><span
lang=EN> (the </span><a
href="https://en.wikipedia.org/wiki/Central_nervous_system"
title="Central nervous system"><span lang=EN>central nervous systems</span></a><span
lang=EN> of animals, in particular the </span><a
href="https://en.wikipedia.org/wiki/Brain" title=Brain><span lang=EN>brain</span></a><span
lang=EN>) which are used to estimate or </span><a
href="https://en.wikipedia.org/wiki/Universal_approximation_theorem"
title="Universal approximation theorem"><span lang=EN>approximate</span></a><span
lang=EN> </span><a href="https://en.wikipedia.org/wiki/Function_(mathematics)"
title="Function (mathematics)"><span lang=EN>functions</span></a><span lang=EN>
that can depend on a large number of </span><a
href="https://en.wikipedia.org/wiki/Argument_of_a_function"
title="Argument of a function"><span lang=EN>inputs</span></a><span lang=EN>
and are generally unknown. Artificial neural networks are generally presented
as systems of interconnected &quot;</span><a
href="https://en.wikipedia.org/wiki/Artificial_neuron" title="Artificial neuron"><span
lang=EN>neurons</span></a><span lang=EN>&quot; which exchange messages between
each other. The connections have </span><a
href="https://en.wikipedia.org/wiki/Weighting" title=Weighting><span lang=EN>numeric
weights</span></a><span lang=EN> that can be tuned based on experience, making
neural nets adaptive to inputs and capable of learning.”</span></p>

<p class=MsoNormal>Please refer to this articles that give a good overview of
what is Artificial Neural Network:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-18.0pt'><span
style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="http://www.willamette.edu/~gorr/classes/cs449/intro.html">http://www.willamette.edu/~gorr/classes/cs449/intro.html</a></p>

<p class=MsoListParagraphCxSpLast style='text-indent:-18.0pt'><span
style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a
href="http://www.doc.ic.ac.uk/~nd/surprise_96/journal/vol4/cs11/report.html">http://www.doc.ic.ac.uk/~nd/surprise_96/journal/vol4/cs11/report.html</a></p>

<p class=MsoNormal>There is numerous models to build an ANN. Basically
artificial neurons are little devices that function like a pump. When their
input reach a certain level or potential threshold, they fire a message from
their output to the neurons connected to them. The neurons are connected
through axons/connections with a given weight. The value of the weight of each
axon is computed through a training process. It is this weight that makes ANN
able to self-learning.</p>

<p class=MsoNormal>One model is to define a neuron as following:</p>

<p class=MsoNormal align=center style='text-align:center'>
    <img border=0
width=576 height=410 id="Picture 2" src="images/neuronal_network_ex1.png"></p>

<p class=MsoNormal>If a neuron receives inputs (y<sub>1</sub>, y<sub>2</sub> … y<sub>n</sub>)
from n input neurons, the neurons will first sum up the inputs multiplied by
the weight of each axons:</p>

<p class=MsoNormal align=center style='text-align:center'>Y<span
style='font-size:10.0pt;line-height:107%'>1</span>W<span style='font-size:10.0pt;
line-height:107%'>1</span> + Y<span style='font-size:10.0pt;line-height:107%'>2</span>W<span
style='font-size:10.0pt;line-height:107%'>2</span> + Y<span style='font-size:
10.0pt;line-height:107%'>3</span>W<span style='font-size:10.0pt;line-height:
107%'>3</span> + ... &gt; T</p>

<p class=MsoNormal>If this sum is greater than a potential threshold T, the
neuron is activated and will pass this sum to a transfer function f. This
function will then calculate a new output than will become the input of other
neurons.</p>

<p class=MsoNormal align=center style='text-align:center'>
    <img border=0
width=150 height=51 id="Picture 12" src="images/neuronal_network_ex2.png"></p>

<p class=MsoNormal>This propagation will continue until to reach neurons
without output connections.</p>

<p class=MsoNormal>Usually we distinguish 3 types of neurons:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-18.0pt'><span
style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Input neuron: A neuron that receive their input directly from a
sensor, a typical “analogRead” on Arduino.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Hidden neuron: A neuron that transfer information</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-18.0pt'><span
style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Output neuron: A neuron that send their output directly to an
actuor, a typical “analogWrite” on Arduino.</p>

<p class=MsoNormal>For a given number of neurons (input, hidden and output), we
can connect them through all possible connections, creating an ANN:</p>

<p class=MsoNormal align=center style='text-align:center'>
    <img border=0
width=450 height=375 id="Picture 24" src="images/neuronal_network_ex3.png"></p>

<p class=MsoNormal>Ok, but why such thing can learn and produce a result?</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Without
going to deep in the math, the connection, the transfer function and potential
threshold can be fixed. Then only weights between neurons need to be determined
to solve a problem.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>When
we train an ANN, we provide the output for a given known input. By using some
algorithms (Back Propagation is the most usual), we can calculate the variation
of the weight based on the delta (mean square error) between the actual output
and the provided output. These variations can be used to adjust the weights of
each axon. More you give known output for given known input, more the neural
network adjust the weights to give the correct output. The great result is an
unknown input but similar to the one trained will trigger an output that is
predicted and correct.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>For
example, if you train your ANN to recognize the letter scripted “t”, then an
input of any “t” shaped drawing will be recognized as a “t”.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
other great result of ANN, if you have one ANN to recognize red objects and one
to recognized the letter “t” then by adding the 2 ANN together, you have a new
ANN that will recognize red ”t”. This property is used in deep learning. The
process of recognition is sliced in different layers of specialized ANNs. By
adding all this layer, you get an ANN who recognize very complex information.</p>

<h1>Step10: Implementation</h1>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>To
implement an ANN, we need a network of neurons connected to our sensors and
motors:</p>

<p class=MsoNormal align=center style='text-align:center'>
    <img border=0
width=575 height=172 id="Picture 25" src="images/neuronal_network.png"></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
down triangles are input neurons. The up triangles are output neurons. The
parallelograms are hidden neurons.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>We
need a transfer function. I used a PID function. I like this function because
it gives neurons the possibility to integrate and differentiate information as
well as a linear behavior (typical neuron behavior). If you don’t know what is
a PID function please refer to this link:</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><a
href="https://en.wikipedia.org/wiki/PID_controller">https://en.wikipedia.org/wiki/PID_controller</a></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
PID function has been implemented as a library. This function is very useful in
robotic when you want balance a machine given sensor inputs (Copter,
self-balancing machine …) I implemented this library with few goodies to
correct PID raw implementation; bound the integration, minimize integration
errors, and a mechanism to stabilize the PID when the input is discontinuous. I
also implemented a very basic auto tuner used to calibrate the PID functions.
This auto tuner suppose the input to be “clean” by using some low pass filter.
If you have a look to the input neurons, you can see a low pass filter on all
the “analogRead”.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Our
neurons will force the motors to move in order to balance the sensors; a
perfect behavior for a moving machine.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>And
at last, we need to define our weights. Normally the weights are unknown and
should be calculated through learning processes. ATTINY doesn’t have that
power. An external computer can be used to feed the network with the weights.
It is my next project.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>For
now, let build the weights manually. In this case it is not too hard. First we
need to define several behaviors:</p>

<p class=MsoListParagraphCxSpFirst style='text-align:justify;text-justify:inter-ideograph;
text-indent:-18.0pt'><span style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Behavior 1: Go forward and stop when encountered an obstacle in
front of</p>

<p class=MsoListParagraphCxSpMiddle style='text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Behavior 2: Turn left or right to avoid an obstacle on the side</p>

<p class=MsoListParagraphCxSpLast style='text-align:justify;text-justify:inter-ideograph;
text-indent:-18.0pt'><span style='font-family:Symbol'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Behavior 3: Escape if the robot is stuck (stop)</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>You
will find in the sketch several configuration to test each of these behaviors;
just comment/uncomment the behavior you want to experiment.</p>

<h2>Behavior 1: Go forward and stop when encountered an obstacle in front of</h2>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>#if
defined(DEBUG_FRONT_SENSOR) // Front network</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w1 = 1;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w2 = 0;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w3 = 0;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w4 = 1;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w5 = 0;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w6 = 0;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w7 = 1;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w8 = 0;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w9 = 0;</span></p>

<p class=MsoNormal>When the front sensor detect nothing (output is 1), let have
the 2 motors run forward (output is 1).</p>

<h2>Behavior 2: Turn left or right to avoid an obstacle on the side</h2>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>#elif
defined(DEBUG_SIDE_SENSOR) // Side network</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w1 = 0;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w2 = 1;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w3 = 0;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w4 = 0;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w5 = 1;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w6 = 0;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w7 = 0;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w8 = -1;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w9 = 0;</span></p>

<p class=MsoNormal>When the side sensors detect something (output is 1), let
have the 2 motors run in inverse directions (output is 1 and -1).</p>

<h2>Behavior 3: Escape if the robot is stuck (stop)</h2>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>#elif
defined(DEBUG_RANDOM_SENSOR) // Random network</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w1 = 0;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w2 = 0;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w3 = -1;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w4 = 0;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w5 = 0;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w6 = -2;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w7 = 0;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w8 = 0;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w9 = 2;</span></p>

<p class=MsoNormal>When the robot is stopped (i.e. contrary of the front
behavior so -1), let have the 2 motors run in inverse directions (output is 2
and -2) but overriding any other weights (2 &gt; 1).</p>

<h2>Let sum up:</h2>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>#else
// Sum all networks (Front + Side + Random)</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w1 = 1;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w2 = 1;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w3 = -1;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w4 = 1;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w5 = 1;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w6 = -2;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w7 = 1;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w8 = -1;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int w9 = 2;</span></p>

<h2>And then build our network:</h2>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int x1 = frontSensor.fire();</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int x2 = sideSensor.fire();</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int x3 = frontController.fire(w1 * x1);</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int x4 = sideController.fire(w2 * x2);</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
int x5 = escapeController.fire(w3 * x3);</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
motor_R.fire(w4 * x3 + w5 * x4 + w6 * x5);</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;
motor_L.fire(w7 * x3 + w8 * x4 + w9 * x5);</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:新宋体'>&nbsp;</span></p>

<p class=MsoNormal>You recognize the weighted sum coming from each neurons to
the other neurons.</p>

<p class=MsoNormal>As a conclusion, the robot will avoid obstacle without
bunches of conditions and loops. And by adjusting the weights, the robot can
have different behaviors; like a line follower. This can be done without
recompile and upload the sketch but simply by giving new weights through some
interfaces (Serial for example).</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Thank
you</p>

</div>

</body>

</html>
